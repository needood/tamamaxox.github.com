// Generated by CoffeeScript 1.4.0
(function() {

  $(document).ready(function() {
    var navbar, scrollspybar, ssheight, sshtml;
    if ($.cookie('oauth-token')) {
      $('#backend').addClass('show');
    }
    navbar = $(".F-main-navbar-");
    navbar.css("height", navbar.height());
    navbar.children(".F-main-navbar").affix({
      offset: {
        top: navbar.offset().top
      }
    });
    scrollspybar = $("#book_bar");
    if (scrollspybar.length > 0) {
      sshtml = '<div class="nav">\n	<div class="f-block">\n		<ul>';
      $(".article [id]").each(function(i, item) {
        return sshtml += "<li>\n	<a href='#" + ($(item).attr("id")) + "'>" + ($(item).text()) + "</a>\n</li>";
      });
      sshtml += '		</ul>\n	</div>\n</div>';
      scrollspybar.html(sshtml);
      scrollspybar.children(".nav").css("padding-top", navbar.height());
      scrollspybar.css("margin-top", "-" + (navbar.height()));
      ssheight = scrollspybar.height() + 10;
      scrollspybar.css("height", ssheight);
      $('body').scrollspy($.extend({}, $('body').data(), {
        offset: ssheight
      }));
      scrollspybar.find("li > a").click(function(event) {
        event.preventDefault();
        return $('body').scrollTop($("#" + ($(this).attr('href').replace(/^#/, ''))).offset().top - ssheight);
      });
      return scrollspybar.children(".nav").affix({
        offset: {
          top: scrollspybar.offset().top
        }
      });
    }
  });

}).call(this);
